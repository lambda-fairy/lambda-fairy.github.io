general:
  branches:
    ignore:
      - master

machine:
  ghc:
    version: 7.10.1
  ruby:
    version: 2.2.0

dependencies:
  override:
    - gem install sass --no-rdoc --no-ri
    - cabal update
    - cabal install --only-dependencies -O0 -j

test:
  override:
    - cabal configure -O0 && cabal run -- rebuild

deployment:
  push:
    branch: source
    commands:
      - deploy/deploy 'Circle CI'
